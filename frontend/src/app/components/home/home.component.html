<div class="min-h-screen bg-gray-100">
  <div class="max-w-4xl mx-auto py-8 px-4">
    <div class="mb-6 flex justify-between items-center">
      <h1 class="text-3xl font-bold">Inicio</h1>
      @if (isAuthenticated) {
        <a routerLink="/posts/create" class="bg-primary-500 text-white px-4 py-2 rounded-md hover:bg-primary-600">
          Crear Post
        </a>
      }
    </div>

    @if (posts.length === 0) {
      <div class="bg-white rounded-lg shadow p-8 text-center text-gray-500">
        AÃºn no hay publicaciones. Â¡SÃ© el primero en crear una!
      </div>
    } @else {
      <div class="space-y-4">
        @for (post of posts; track post.id) {
          <div class="bg-white rounded-lg shadow hover:shadow-md transition flex">
            <!-- Vote section -->
            <div class="w-12 bg-gray-50 rounded-l-lg flex flex-col items-center py-2">
              <button
                (click)="vote(post.id, 1)"
                [class.text-primary-500]="post.userVote === 1"
                class="hover:text-primary-500 transition"
                [disabled]="!isAuthenticated"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M5 10l5-5 5 5H5z"/>
                </svg>
              </button>
              <span class="text-sm font-bold my-1" [class.text-primary-500]="post.voteCount > 0" [class.text-blue-500]="post.voteCount < 0">
                {{ post.voteCount }}
              </span>
              <button
                title="Downvote"
                (click)="vote(post.id, -1)"
                [class.text-green-500]="post.userVote === -1"
                class="hover:text-blue-500 transition"
                [disabled]="!isAuthenticated"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M15 10l-5 5-5-5h10z"/>
                </svg>
              </button>
            </div>

            <!-- Post content -->
            <div class="flex-1 p-4">
              <div class="flex items-center text-xs text-gray-500 mb-2">
                <a [routerLink]="['/r', post.subredditId]" class="font-bold text-gray-900 hover:underline">
                  r/{{ post.subredditName }}
                </a>
                <span class="mx-2">â€¢</span>
                <span>Publicado por u/{{ post.authorUsername }}</span>
                <span class="mx-2">â€¢</span>
                <span>{{ getTimeAgo(post.createdAt) }}</span>
              </div>

              <a [routerLink]="['/posts', post.id]" class="block">
                <h2 class="text-xl font-bold mb-2 hover:underline">{{ post.title }}</h2>
                <p class="text-gray-700 line-clamp-3">{{ post.content }}</p>
              </a>

              <div class="mt-3 flex items-center justify-between text-sm text-gray-500">
                <a [routerLink]="['/posts', post.id]" class="hover:bg-gray-100 px-2 py-1 rounded">
                  ðŸ’¬ {{ post.commentCount }} comentarios
                </a>
                @if (canDeletePost(post)) {
                  <button
                    (click)="deletePost(post.id)"
                    class="text-primary-500 hover:text-primary-700 hover:bg-primary-50 px-2 py-1 rounded transition"
                    title=""
                  >
                  <div style="width: 16px; height: 16px;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg>

                  </div>
                  </button>
                }
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
